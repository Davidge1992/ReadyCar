{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/davidgonzalez/Documents/GitHub/ReadyCar/frontend/src/Orders/pages/OrdersPage.jsx\",\n    _s = $RefreshSig$();\n\nimport React, { useEffect, useState, useCallback, useReducer, useRef } from 'react';\nimport { useParams } from 'react-router-dom';\nimport gsap from 'gsap';\nimport axios from '../../axios';\nimport PreLoader from '../../shared/components/PreLoader/PreLoader';\nimport OrdersList from '../components/OrdersList';\nimport Layout from '../../shared/components/Layout/Layout';\n\nconst orderReducer = (state, action) => {\n  switch (action.type) {\n    case 'GET':\n      return action.orders;\n\n    case 'DELETE':\n      return state.filter(order => order.id !== action.id);\n\n    case 'UPDATE_ORDER':\n      return state.map(order => {\n        if (order.id === action.id) {\n          return { ...order,\n            ...action.update\n          };\n        }\n\n        return order;\n      });\n\n    default:\n      return state;\n  }\n};\n\nconst Orders = () => {\n  _s();\n\n  const [orders, dispatch] = useReducer(orderReducer, []);\n  const [isLoading, setIsLoading] = useState(false);\n  const uid = useParams().id;\n  let tl = useRef();\n  let title = useRef(null);\n  let line = useRef(null);\n  useEffect(() => {\n    tl.current = gsap.timeline();\n    tl.current.from(title, 1.5, {\n      scale: 0.5,\n      opacity: 0\n    }).from(line, 2, {\n      width: 0\n    }, 0.5);\n  }, []);\n  useEffect(() => {\n    setIsLoading(true);\n    axios.get(`/orders/user/${uid}`).then(res => {\n      setIsLoading(false);\n      dispatch({\n        type: 'GET',\n        orders: res.data.orders\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, [uid]);\n  const onDeleteOrder = useCallback(orderId => {\n    setIsLoading(true);\n    axios.delete(`/orders/${orderId}`).then(res => {\n      setIsLoading(false);\n      dispatch({\n        type: 'DELETE',\n        id: orderId\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, []);\n  const onPayNowHandler = useCallback(orderId => {\n    setIsLoading(true);\n    axios.patch(`/orders/option/${orderId}`, {\n      isPayNow: true\n    }, {\n      'Content-Type': 'application/json'\n    }).then(res => {\n      setIsLoading(false);\n      dispatch({\n        type: 'UPDATE_ORDER',\n        id: orderId,\n        update: res.data.order\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, []);\n  const onPayLaterHandler = useCallback(orderId => {\n    setIsLoading(true);\n    axios.patch(`/orders/option/${orderId}`, {\n      isPayNow: false\n    }, {\n      'Content-Type': 'application/json'\n    }).then(res => {\n      setIsLoading(false);\n      dispatch({\n        type: 'UPDATE_ORDER',\n        id: orderId,\n        update: res.data.order\n      });\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, []); //Send e-mail on confirm order\n\n  const sendInvoiceEmail = useCallback(orderId => {\n    axios.post(`/emails/send/${uid}`, {\n      orderId\n    }, {\n      'Content-Type': 'application/json'\n    }).then(res => {}).catch(err => {\n      console.log(err);\n    });\n  }, [uid]);\n  const onInvoicePdf = useCallback(orderId => {\n    setIsLoading(true);\n    axios.get(`/orders/invoice/${orderId}`).then(res => {\n      setIsLoading(false);\n    }).catch(err => {\n      setIsLoading(false);\n      console.log(err);\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Layout, {\n    children: [/*#__PURE__*/_jsxDEV(\"h1\", {\n      ref: el => title = el,\n      className: \"home-title\",\n      children: \"Your order and Checkout page\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 121,\n      columnNumber: 12\n    }, this), /*#__PURE__*/_jsxDEV(\"p\", {\n      ref: el => line = el,\n      className: \"line\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 13\n    }, this), isLoading ? /*#__PURE__*/_jsxDEV(PreLoader, {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 126,\n      columnNumber: 19\n    }, this) : /*#__PURE__*/_jsxDEV(OrdersList, {\n      orders: orders,\n      onDeleteOrder: onDeleteOrder,\n      onPayNowHandler: onPayNowHandler,\n      onPayLaterHandler: onPayLaterHandler,\n      sendInvoiceEmail: sendInvoiceEmail,\n      onInvoicePdf: onInvoicePdf\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 127,\n      columnNumber: 19\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 7\n  }, this);\n};\n\n_s(Orders, \"Xu9a43g3UVftbdByHgtO1oCrg20=\", false, function () {\n  return [useParams];\n});\n\n_c = Orders;\nexport default Orders;\n\nvar _c;\n\n$RefreshReg$(_c, \"Orders\");","map":{"version":3,"sources":["/Users/davidgonzalez/Documents/GitHub/ReadyCar/frontend/src/Orders/pages/OrdersPage.jsx"],"names":["React","useEffect","useState","useCallback","useReducer","useRef","useParams","gsap","axios","PreLoader","OrdersList","Layout","orderReducer","state","action","type","orders","filter","order","id","map","update","Orders","dispatch","isLoading","setIsLoading","uid","tl","title","line","current","timeline","from","scale","opacity","width","get","then","res","data","catch","err","console","log","onDeleteOrder","orderId","delete","onPayNowHandler","patch","isPayNow","onPayLaterHandler","sendInvoiceEmail","post","onInvoicePdf","el"],"mappings":"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","sourcesContent":["import React, { useEffect, useState, useCallback, useReducer, useRef } from 'react'\nimport { useParams } from 'react-router-dom';\nimport gsap from 'gsap';\nimport axios from '../../axios';\n\nimport PreLoader from '../../shared/components/PreLoader/PreLoader';\nimport OrdersList from '../components/OrdersList';\nimport Layout from '../../shared/components/Layout/Layout';\n\nconst orderReducer = ( state, action ) => {\n    switch(action.type){\n        case 'GET':\n            return action.orders;\n        case 'DELETE':\n            return state.filter(order => order.id !== action.id);\n        case 'UPDATE_ORDER':\n                return state.map(order => {\n                    if(order.id === action.id){ \n                    return {\n                        ...order,\n                        ...action.update\n                    }               \n                }\n                return order\n        });\n        default:\n            return state;\n    }\n};\n\n\nconst Orders = () => {\n\n    const [ orders, dispatch ] = useReducer(orderReducer, [])\n    const [ isLoading, setIsLoading ] = useState(false);\n    const uid = useParams().id;\n    let tl = useRef();\n    let title = useRef(null);\n    let line = useRef(null);\n\n    useEffect(() => {\n        tl.current = gsap.timeline();\n        tl.current.from(title, 1.5,{scale: 0.5, opacity:0})\n                  .from(line, 2, { width: 0 }, 0.5)\n    }, []);\n\n    useEffect(() => {\n        setIsLoading(true);\n        axios.get(`/orders/user/${uid}`)\n             .then(res => {\n                setIsLoading(false);\n                dispatch({type: 'GET', orders: res.data.orders})\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             })\n    }, [uid]);\n\n    const onDeleteOrder = useCallback((orderId) => {\n        setIsLoading(true);\n        axios.delete(`/orders/${orderId}`)\n             .then(res => {\n                setIsLoading(false);\n                dispatch({type: 'DELETE', id: orderId})\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             })\n    }, []);\n\n    const onPayNowHandler = useCallback((orderId) => {\n        setIsLoading(true);\n        axios.patch(`/orders/option/${orderId}`, {isPayNow : true},\n                { 'Content-Type': 'application/json' })\n             .then(res => {\n                setIsLoading(false);\n                dispatch({type:'UPDATE_ORDER', id: orderId, update: res.data.order})\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             });\n    }, []);\n\n    const onPayLaterHandler = useCallback((orderId) => {\n        setIsLoading(true);\n        axios.patch(`/orders/option/${orderId}`, {isPayNow : false},\n                { 'Content-Type': 'application/json' })\n             .then(res => {\n                setIsLoading(false);\n                dispatch({type:'UPDATE_ORDER', id: orderId, update: res.data.order})\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             });\n    }, []);\n\n    //Send e-mail on confirm order\n    const sendInvoiceEmail = useCallback((orderId) => {\n        axios.post(`/emails/send/${uid}`, {orderId},\n       { 'Content-Type': 'application/json' })\n             .then(res => {\n             }).catch(err => {\n                console.log(err)\n             });\n    }, [uid]);\n\n    const onInvoicePdf = useCallback((orderId) => {\n        setIsLoading(true);\n        axios.get(`/orders/invoice/${orderId}`)\n             .then(res=> {\n                setIsLoading(false);\n             }).catch(err => {\n                setIsLoading(false);\n                console.log(err)\n             });\n    }, [])\n\n\n    return(\n      <Layout> \n           <h1 ref={ el => ( title = el )} className='home-title'>\n                Your order and Checkout page</h1>\n            <p ref={ el => ( line = el )} className='line'/>\n            {\n                isLoading \n                ? <PreLoader /> \n                : <OrdersList orders={orders}\n                onDeleteOrder={onDeleteOrder}\n                onPayNowHandler={onPayNowHandler}\n                onPayLaterHandler={onPayLaterHandler}\n                sendInvoiceEmail={sendInvoiceEmail}\n                onInvoicePdf={onInvoicePdf}/>\n            }        \n      </Layout>\n    )\n}\n\nexport default Orders;"]},"metadata":{},"sourceType":"module"}